name: Execute Notebook

on:
  workflow_run:
    workflows: ["Build and push container image"]
    branches: [main, postprint]
    types: [completed]

jobs:
  execute:
    runs-on: ubuntu-latest
    steps:
      - name: Build and push the image to quay.io (render)
        if: github.ref == 'refs/heads/main'
        uses: eds-book/notebooks-workflows/.github/workflows/execute.yaml@main
        with:
          branch: 'render'
      - name: Build and push the image to quay.io (preview)
        if: github.ref == 'refs/heads/postprint'
        uses: eds-book/notebooks-workflows/.github/workflows/execute.yaml@main
        with:
          branch: 'preview'